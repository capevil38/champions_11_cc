<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Champions 11 CC – Team Stats</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar">
      <div class="container" style="display:flex; justify-content:space-between; align-items:center;">
        <a class="navbar-brand" href="index.html">Champions 11 CC</a>
        <ul class="navbar-nav">
          <li><a href="index.html" class="active">Home</a></li>
          <li><a href="players.html">Players</a></li>
          <li><a href="matches.html">Matches</a></li>
          <li><a href="leaderboards.html">Leaderboards</a></li>
        </ul>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
      <div class="container">
        <h1>Champions 11 Cricket Club</h1>
        <p>Explore comprehensive stats of our players and matches. Celebrate our achievements and track our journey.</p>
      </div>
    </section>

    <!-- Team Summary -->
    <main class="container">
      <h2>Team Summary</h2>
      <div id="summary-grid" class="grid grid-3"></div>

      <!-- Top Players -->
      <div class="grid grid-2" style="margin-top:2rem;">
        <div>
          <h3>Top Run Scorers</h3>
          <div id="top-runs" class="card"></div>
        </div>
        <div>
          <h3>Top Wicket Takers</h3>
          <div id="top-wickets" class="card"></div>
        </div>
      </div>
    </main>

    <footer>
      © <span id="year"></span> Champions 11 CC
    </footer>

    <script src="script.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', async () => {
        const data = await loadData();
        // Team summary cards
        const summary = data.team_stats && data.team_stats.length ? data.team_stats[0] : {};
        const highestTeamTotal =
          data.matches && data.matches.length
            ? data.matches.reduce((max, match) => Math.max(max, match['Team Runs'] || 0), 0)
            : null;
        const items = [
          { label: 'Matches', value: summary.Matches },
          { label: 'Wins', value: summary.Won },
          { label: 'Losses', value: summary.Lost },
          { label: 'Ties', value: summary.Tie },
          { label: 'No Result', value: summary['No Result'] },
          { label: 'Highest Total', value: highestTeamTotal },
        ];
        const grid = document.getElementById('summary-grid');
        items.forEach((item) => {
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `<div class="card-title">${item.label}</div><div class="card-value">${formatNumber(item.value)}</div>`;
          grid.appendChild(card);
        });

        // Top runs and wickets
        const topRuns = getTopPlayers(data, 'Runs', 5);
        const topWkts = getTopPlayers(data, 'Wkts', 5);
        const runsContainer = document.getElementById('top-runs');
        const wicketsContainer = document.getElementById('top-wickets');
        // function to build list
        function buildList(container, arr, field) {
          const list = document.createElement('ul');
          list.style.listStyle = 'none';
          list.style.padding = '0';
          arr.forEach((stat, i) => {
            const player = getPlayerById(data, stat['PlayerID']);
            const li = document.createElement('li');
            li.style.marginBottom = '0.5rem';
            li.innerHTML = `<strong>${i + 1}. <a href="player.html?id=${stat['PlayerID']}">${player['Player Name']}</a></strong> – ${formatNumber(stat[field])}`;
            list.appendChild(li);
          });
          container.appendChild(list);
        }
        buildList(runsContainer, topRuns, 'Runs');
        buildList(wicketsContainer, topWkts, 'Wkts');
        document.getElementById('year').textContent = new Date().getFullYear();
      });
    </script>
  </body>
</html>
